<div class="general-visual">
  <div class="container">
    <p id="notice"><%= flash[:notice] %></p>
    <div class="row">
      <div class="col-9 mt-5">
        <div class="d-flex">
          <div class="col-4">
            <h1 class="border-bottom border-danger">ユーザー情報</h1>
            <%= attachment_image_tag @user, :profile_image, class:"rounded-lg mt-3 position-relative", fallback: "no_image.png", size: "200x250" %>
            <% if unchecked_notifications.any? %>
              <% if @user == current_user %>
                <%= link_to notifications_path, remote: true do %>
                  <i class="fa fa-bell fa-2x position-absolute top-0 end-0 translate-middle" style="color: red;" size: "200x200"><br><span style="font-size:18px;">click!</span></i>
                <% end %>
              <% end %>
            <% end %>
            <p class="mt-3 mb-4">名前：<%= @user.name %></p>
            <span>住んだことのある県：</span>
            <% if @user.user_prefectures.where(status: 0).exists? %>
              <% @user.user_prefectures.where(status: 0).each do |lived| %>
                <%= link_to lived.prefecture.name, posts_path(prefecture_id: lived.prefecture.id), class: "link" %>
              <% end %>
            <% else %>
              <span>未入力</span>
            <% end %>
            <br>
            <br>
            <span>住んでみたい県：</span>
            <% if @user.user_prefectures.where(status: 1).exists? %>
              <% @user.user_prefectures.where(status: 1).each do |willlive| %>
                <%= link_to willlive.prefecture.name, posts_path(prefecture_id: willlive.prefecture.id), class: "link" %>
              <% end %>
            <% else %>
              <span>未入力</span>
            <% end %>
            <%= link_to "編集する", edit_user_path(@user), class: "btn btn-primary btn-text w-100 mt-4 rounded-pill" %>
          </div>
          <div class="col-7" id="notification_area">
            <h1 class="border-bottom border-danger">自己紹介</h1>
            <% if @user.introduction %>
              <p><%= safe_join(@user.introduction.split("\n"),tag(:br)) %></p>
            <% else %>
              <p>まだ未入力です。</p>
            <% end %>
          </div>
        </div>
        <% if @posts %>
          <h3 class="mt-5 border-bottom border-secondary">質問(<%= @posts.count %>件)</h3>
          <div class="row row-cols-3">
            <% @posts.each do |post| %>
              <div class="col-4 mb-3" >
                <%= render partial: "posts/post_cards", locals: {post: post} %>
              </div>
            <% end %>
          </div>
        <% else %>
          <p>まだ質問はありません</p>
        <% end %>
        <div class="mt-5">
          <%= paginate @posts %>
        </div>
      </div>
      <div class="col-3 mt-5">
        <%= render partial: "users/sidebar" %>
      </div>
    </div>
  </div>
</div>